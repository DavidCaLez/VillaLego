<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividades</title>
    <link rel="stylesheet" href="../css/styleProfesor.css">
</head>
<body>
    <div class="header">
    <a href="/actividad/crear" class="crear-btn">Crear Actividad</a>
    <div class="avatar" onclick="toggleMenu()">?</div>
    <div class="dropdown" id="menu-desplegable">
        <a href="/profesor/verPerfil">Ver perfil</a>
        <a href="/profesor/CrearProfesor.html">Crear profesor</a>
        <a href="/logout">Cerrar sesión</a>
    </div>
    </div>

    <div class="actividad-lista" id="listaActividades">
    <!-- Las actividades se cargarán aquí dinámicamente -->
    </div>

    <script>
    fetch('/usuario/inicial')
        .then(res => res.json())
        .then(data => {
            document.querySelector('.avatar').textContent = data.inicial.toUpperCase();
        });

    function toggleMenu() {
        document.getElementById('menu-desplegable').classList.toggle('show');
    }

    fetch('/actividad/lista')
        .then(res => res.json())
        .then(data => {
        const contenedor = document.getElementById('listaActividades');
        data.forEach(act => {
            contenedor.innerHTML += `
            <div class="actividad">
                <div>
                <strong>${act.nombre}</strong> (ID: ${act.id})<br>
                Fecha: ${act.fecha}
                </div>
                <div class="botones">
                <button class="editar" onclick="location.href='/profesor/editar/${act.id}'">Editar</button>
                <button class="ver" onclick="location.href='/profesor/${act.id}'">Ver</button>
                </div>
            </div>
            `;
        });
        });
    </script>
</body>
</html>
